# SnapDoctor
> OpenClaw é…ç½®åŒ»ç”Ÿ - è®©ç½‘å…³å…·å¤‡è‡ªæˆ‘ä¿®å¤èƒ½åŠ›

---

## âš ï¸ å‰ç½®æ¡ä»¶ï¼ˆé‡è¦ï¼ï¼‰

**è¿™ä¸ªæ’ä»¶ä¸ä¼šè‡ªåŠ¨è¿è¡Œï¼** ä½ éœ€è¦é…ç½®ä¸€ä¸ª"é—¹é’Ÿ"æ¥è§¦å‘å¥åº·æ£€æŸ¥ã€‚

### é…ç½®æ–¹æ³•

#### æ–¹æ³•1ï¼šHeartbeatï¼ˆæ¨èï¼‰

ç¼–è¾‘ `~/.openclaw/workspace/HEARTBEAT.md`:

```markdown
# HEARTBEAT.md

## å®šæœŸæ£€æŸ¥ï¼ˆæ¯ä¸ªå¿ƒè·³ï¼‰
1. ä½¿ç”¨execå·¥å…·è¿è¡Œå¥åº·æ£€æŸ¥å‘½ä»¤ï¼š
   python C:\Users\Lenovo\.openclaw\snapshots\health_guardian.py check
2. å¦‚æœè¿”å›é0ï¼ˆä¸å¥åº·ï¼‰ï¼Œè¿è¡Œè‡ªåŠ¨æ¢å¤ï¼š
   python C:\Users\Lenovo\.openclaw\snapshots\health_guardian.py auto-recover
3. å¦‚æœæ¢å¤æˆåŠŸï¼Œé‡å¯Gateway
```

#### æ–¹æ³•2ï¼šCron Job

```bash
# æ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
openclaw cron add --name "snapdoctor-check" --schedule "*/5 * * * *" --session main --text "æ£€æŸ¥é…ç½®"
```

---

## å½“å‰ç‰ˆæœ¬ (v1.0.0)

### å·²å®ç°åŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| æ‰‹åŠ¨å¤‡ä»½ | æ”¹é…ç½®å‰æ‰‹åŠ¨å¤‡ä»½ |
| å¿«ç…§åˆ—è¡¨ | æŸ¥çœ‹æ‰€æœ‰å¿«ç…§ |
| æ‰‹åŠ¨æ¢å¤ | ä»å¿«ç…§æ¢å¤é…ç½® |
| å¥åº·æ£€æŸ¥ | æ£€æŸ¥é…ç½®æ˜¯å¦æ­£å¸¸ |

---

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…æ’ä»¶

æ’ä»¶æ–‡ä»¶å·²æ”¾åœ¨ï¼š
```
~/.openclaw/extensions/snap-doctor/
```

é‡å¯Gatewayï¼š
```bash
openclaw gateway restart
```

### 2. é…ç½®Heartbeatï¼ˆå¿…é¡»ï¼ï¼‰

ç¼–è¾‘ `~/.openclaw/workspace/HEARTBEAT.md`ï¼Œæ·»åŠ ä¸Šé¢çš„æ£€æŸ¥å‘½ä»¤ã€‚

### 3. æ‰‹åŠ¨å¤‡ä»½ï¼ˆæ”¹é…ç½®å‰å¿…åšï¼‰

```bash
python ~/.openclaw/snapshots/snapshot.py backup
```

### 4. æŸ¥çœ‹å¿«ç…§

```bash
python ~/.openclaw/snapshots/snapshot.py list
```

### 5. æ¢å¤é…ç½®

```bash
python ~/.openclaw/snapshots/snapshot.py restore snapshot_2026-02-28_1641.json
openclaw gateway restart
```

---

## å·¥ä½œåŸç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Heartbeaté—¹é’Ÿ  â”‚ â† ä½ éœ€è¦é…ç½®ï¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ æ¯30åˆ†é’Ÿå“ä¸€æ¬¡
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agentæ”¶åˆ°æé†’  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰§è¡Œæ£€æŸ¥è„šæœ¬    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ å¥åº·ï¼Ÿ   â”‚
    â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
    æ˜¯/   \å¦
    â”‚      â”‚
    â–¼      â–¼
  ç»“æŸ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ æ‰§è¡Œæ¢å¤è„šæœ¬    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ é‡å¯Gatewayâ”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¸¸è§é—®é¢˜

**Q: æ’ä»¶åŠ è½½å¤±è´¥ï¼Ÿ**
```bash
openclaw doctor  # æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
```

**Q: å¿«ç…§æ¢å¤åGatewayèµ·ä¸æ¥ï¼Ÿ**
```bash
# æ‰‹åŠ¨æ¢å¤
copy snapshots\snapshot_manual_2026-*.json openclaw.json
openclaw gateway restart
```

**Q: éœ€è¦æ‰‹åŠ¨å¤‡ä»½å—ï¼Ÿ**
> æ˜¯çš„ï¼æ”¹é…ç½®å‰ä¸€å®šè¦æ‰‹åŠ¨å¤‡ä»½ä¸€æ¬¡ï¼š
> `python snapshot.py backup`

---

## æ–‡ä»¶ç»“æ„

```
snap-doctor/
â”œâ”€â”€ index.ts              # æ’ä»¶ä»£ç ï¼ˆTypeScriptï¼‰
â”œâ”€â”€ openclaw.plugin.json # æ’ä»¶é…ç½®
â”œâ”€â”€ README.md            # è‹±æ–‡è¯´æ˜
â””â”€â”€ README_CN.md         # ä¸­æ–‡è¯´æ˜

snapshots/
â”œâ”€â”€ snapshot.py          # æ‰‹åŠ¨å¿«ç…§å·¥å…·
â””â”€â”€ health_guardian.py   # è‡ªåŠ¨æ£€æŸ¥/æ¢å¤è„šæœ¬
```

---

## å¼€æºåè®®

MIT License ğŸ¦

---

## ä½œè€…

- **Xiaodao + H** - 2026-02-27
